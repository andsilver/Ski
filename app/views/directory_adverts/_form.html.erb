<%= render partial: 'shared/steps', locals: { step: 4 } %>
<% if @directory_advert.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@directory_advert.errors.count, "error") %> prohibited this directory advert from being saved:</h2>

    <ul>
    <% @directory_advert.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

<%= form_for(@directory_advert, html: {multipart: true}) do |f| %>

<% unless @directory_advert.currently_advertised? -%>
<div class="group_panel">
  <div class="row">
    <div class="span8">
      <h2>Type of Advert</h2>
      <p>
        You can have either a directory listing on its own or
        a banner advert which includes a free directory listing.
      </p>
      <div class="field">
        <label class="radio">
          <%= f.radio_button :is_banner_advert, false, class: 'radio' %>
      	  Directory advert only (<%= euros(Website.first.directory_advert_price) %> each)
        </label>
        <label class="radio">
          <%= f.radio_button :is_banner_advert, true, class: 'radio' %>
      	  Banner advert with free directory advert
        </label>
      </div>
    </div>
    <div class="span4">
      <h2>Banner Advert Prices</h2>
      <table class="table table-bordered" style="background: #fff;">
        <tr>
          <th>Banner Number</th>
          <th>Price Each</th>
        </tr>
<% BannerPrice.order('current_banner_number').each do |p| -%>
        <tr>
          <td>
            <%= p.current_banner_number %>
          </td>
          <td>
            <%= euros(p.price) %>
          </td>
        </tr>
<% end -%>
      </table>
    </div>
  </div>
</div>
<% end -%>

<div class="group_panel">
<% if @directory_advert.banner_image %>
  <p style="float:right;"><img src="<%= @directory_advert.banner_image.url %>"></p>
<% end %>
  <h2>Images</h2>
  <p>
    Your directory image can be a logo or a photograph that represents your business. It can be any size.<br>
    Your banner image must be sized to 160 pixels wide and 200 pixels tall.
  </p>
  <div class="field">
    <label for="image">Directory image (.jpeg, .jpg, .gif, .png)</label>
    <%= file_field_tag 'image' %>
  </div>
  <div class="field">
    <label for="banner_image">Banner image (.jpeg, .jpg, .gif, .png)</label>
    <%= file_field_tag 'banner_image' %>
  </div>
</div>

<div class="group_panel">
<table>
  <tr>
    <td width="40%">
<div class="field">
<% if @directory_advert.new_record? -%>
  <%= f.label :resort_id, t('resorts') %>
  <%= select("directory_advert", "resort_id", (Resort.visible.collect {|r| [ r.country.name + ' > ' + r.name, r.id ] }).sort,
  {}, {multiple: true, size: 10}) %>
<% else -%>
  <%= f.label :resort_id, t('resort') %>
  <%= select("directory_advert", "resort_id", (Resort.visible.collect {|r| [ r.country.name + ' > ' + r.name, r.id ] }).sort,
  {prompt: 'Select Resort'}) %>
<% end -%>
</div>
    </td>
    <td width="60%"><br>
      <b>Example</b><br>
      France &gt; Chamonix
<% if @directory_advert.new_record? -%>
      <br><br>Tip:<br>
      On Windows hold down Ctrl to select multiple resorts<br>
      On Mac hold down Cmd
<% end -%>
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.label :category_id, t('category') %>
  <%= select("directory_advert", "category_id", (Category.all.collect {|c| [ t(c.name), c.id ] }).sort, {prompt: 'Select Category'}) %> <%= required_field %>
</div>
    </td>
    <td><br><br>
      Taxis
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.label :business_name %>
  <%= f.text_field :business_name %>
</div>
    </td>
    <td><br><br>
      Alpha Taxis
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.label :business_address %>
  <%= f.text_area :business_address %> <%= required_field %>
</div>
    </td>
    <td><br><br>
      123 Rue Nord<br>
      Chamonix
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.label :postcode, t('postcode') %>
  <%= f.text_field :postcode %>
</div>
    </td>
    <td><br><br>
      74400
    </td>
  </tr>
  <tr>
    <td>
Please include the country calling code.

<div class="field">
  <%= f.label :phone, t('phone') %>
  <%= f.text_field :phone %>
</div>
    </td>
    <td><br><br>
      +33.1234567890
    </td>
  </tr>
    <td>
<div class="field">
  <%= f.label :url, 'Website address (URL)' %>
  <%= f.text_field :url %>
</div>
    </td>
    <td><br>
      http://www.example.org<br>
      If you have a banner advert, this is also where the visitor will be sent when they click your banner
    </td>
  </tr>
  <tr>
    <td>
      <div class="field">
        <%= f.label :strapline %>
        <%= f.text_area :strapline %> <%= required_field %>
      </div>
    </td>
    <td><br><br>
      A short description of your business (maximum of 255 characters)
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.label :description %>
  <%= f.text_area :description %>
</div>
    </td>
    <td><br><br>
      A more detailed description of your business
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.label :opening_hours %>
  <%= f.text_area :opening_hours %>
</div>
    </td>
    <td><br><br>
      Monday-Saturday: All day<br>
      Sunday: Midnight to 8pm
    </td>
  </tr>
  <tr>
    <td>
<div class="field">
  <%= f.submit(t('save'), class: 'btn btn-large btn-primary') %>
</div>
    </td>
    <td>&nbsp;</td>
  </tr>
</table>
</div><!--.group_panel-->
<% end %>
