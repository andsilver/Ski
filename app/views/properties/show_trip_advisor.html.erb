<%= content_for :breadcrumbs_and_heading, breadcrumbs_and_heading(@property.breadcrumbs, @heading) %>

<%= content_for :theme, @property.theme %>

<%= render partial: 'google_map',
    locals: { lat: @property.latitude, lng: @property.longitude } %>
<div id="property">
  <%= render partial: 'user_logo', locals: { property: @property } %>
<h1 class="property_name"><span><%= t('property_name') %>:</span> <%= @property.name %></h1>
<%= render partial: 'price_and_id', locals: { property: @property } %>

<%= render partial: 'images', locals: { property: @property } %>

<h2><%= t('features') %></h2>

<div id="features" class="group">
  <div class="column">
    <%= I18n.t('bedrooms') %>: <%= @property.number_of_bedrooms %>
  </div>
  <div class="column">
    <%= I18n.t('bathrooms') %>: <%= @property.number_of_bathrooms %>
  </div>
  <div class="column">
<% unless @property.for_sale? -%>
    <%= I18n.t('sleeping_capacity') %>: <%= @property.sleeping_capacity %>
<% end -%>
  </div>
  <% if (amenities = @property.amenities).any? %>
    <p class="divider">&nbsp;</p>
    <% amenities.each_slice((amenities.count / 3.0).ceil) do |group| %>
      <div class="column">
        <% group.each do |amenity| %>
        <%= feature_tick(true, amenity.name.capitalize.sub('_', ' ')) %><br>
        <% end %>
      </div>
    <% end %>
  <% end %>
</div>

<%= render partial: 'trip_advisor_calendar' %>

<%= render partial: 'trip_advisor_enquiry' %>

<% unless @property.description.nil? %>
<h2><%= I18n.t('description') %></h2>
<%= md @property.description %>
<% end %>

<%= render 'location_button_and_modal' if @property.latitude.present? %>

<%= clear %>

<% if @property.reviews.any? %>
<h2 id="reviews">Reviews</h2>
<div class="reviews">
  <% @property.reviews.each do |review| %>
  <div class="review">
    <h3 class="review-title"><%= review.rating %>/5 <%= review.title %></h3>
    <p class="review-author-details">
      <span class="review-author-name"><%= review.author_name %></span>,
      <span class="review-author-location"><%= review.author_location %></span>
      -
      <span class="review-visited-on">
        <%= review.visited_on.strftime('%B %Y') %>
      </span>
    </p>
    <p class="review-content">
      <%= review.content %>
    </p>
  </div>
  <% end %>
</div>
<% end %>

</div><!--#property-->
