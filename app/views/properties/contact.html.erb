<%= render 'spam/spam' %>
<%= render partial: '/properties/user_logo', locals: { property: @property } %>

<p>
  <%= t('enquiries_controller.enquiry_introduction') %>
</p>
<%= clear %>
<% if @enquiry.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@enquiry.errors.count, "error") %> prohibited this enquiry from being sent:</h2>

    <ul>
    <% @enquiry.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
<% end %>

<div id="panel_1">
<div class="well">
  <h2><%= t('enquiries_controller.send_an_email') %></h2>
<%= form_for @enquiry do |f| %>
<%= f.hidden_field :property_id %>

<span id="current_time">
  <!-- current time placed here by AJAX request -->
</span>

<div class="field">
  <%= f.label :name, t('name') %>
  <%= f.text_field :name, placeholder: 'Your name' %>
</div>

<div class="field">
  <%= f.label :email, t('email') %>
  <%= f.email_field :email, placeholder: 'you@example.com' %>
</div>

<div class="field">
  <%= f.label :phone, t('phone') %>
  <%= f.text_field :phone, placeholder: '441234567890' %>
</div>

<% if @property.for_rent? %>
<script>
$(function () {
  $('.date').datepicker({format: 'D d MM yyyy', showOn: 'both', buttonImage: '/images/calendar.png'});
});
</script>

<div class="field input-append date">
  <%= f.label :date_of_arrival, t('enquiries_controller.date_of_arrival') %>
  <%= f.text_field :date_of_arrival %><span class="add-on"><i class="icon-th"></i></span>
</div>

<div class="field input-append date">
  <%= f.label :date_of_departure, t('enquiries_controller.date_of_departure') %>
  <%= f.text_field :date_of_departure %><span class="add-on"><i class="icon-th"></i></span>
</div>

<div class="field">
  <%= f.label :number_of_adults, t('enquiries_controller.number_of_adults') %>
  <%= select("enquiry", "number_of_adults", (0..10).collect {|n| [ n, n ] }, {prompt: 'Select'}, class: 'span1') %>
</div>

<div class="field">
  <%= f.label :number_of_children, t('enquiries_controller.number_of_children') %>
  <%= select("enquiry", "number_of_children", (0..10).collect {|n| [ n, n ] }, {prompt: 'Select'}, class: 'span1') %>
</div>

<div class="field">
  <%= f.label :number_of_infants, t('enquiries_controller.number_of_infants') %>
  <%= select("enquiry", "number_of_infants", (0..10).collect {|n| [ n, n ] }, {prompt: 'Select'}, class: 'span1') %>
</div>
<% end %>

<div class="field">
  <%= f.label :comments, t('enquiries_controller.comments') %>
  <%= f.text_area :comments %>
</div>

<div class="field">
  <label class="checkbox">
    <%= f.check_box :permission_to_contact %>
    <%= t('enquiries_controller.permission_to_contact') %>
  </label>
</div>

<%= f.submit 'Send', class: 'btn btn-primary' %>
<% end %>

</div>
</div><!--#panel_1-->
<div id="panel_2">
  <div class="well">
    <h2><%= t('contact_details') %></h2>
    <p><%= t('phone') %>: <%= @property.user.phone %></p>
    <p><%= t('mobile') %>: <%= @property.user.mobile %></p>
  </div>
</div><!--#panel_2-->
