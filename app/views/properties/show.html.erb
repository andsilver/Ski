<%= content_for :breadcrumbs_and_heading, breadcrumbs_and_heading(@breadcrumbs, @heading) %>

<%= content_for :theme, @property.theme %>

<%= render partial: 'google_map',
    locals: { lat: @property.latitude, lng: @property.longitude } %>
<script>
  $(function() {
    $('#property-thumbnails a').fancyZoom({scaleImg: true, closeOnClick: true});
	});
</script>
<div id="content-with-side-banners">
<div id="property">
  <%= render partial: 'user_logo', locals: { property: @property } %>
<h1 class="property_name"><span><%= t('property_name') %>:</span> <%= @property.name %></h1>
<p class="property_id"><%= I18n.t('property_id') %>: <span><%= @property.id %></span></p>

<% if fav = favourite_for_property(@property) %>
<%= form_for(fav, method: :delete) do |f| %>
<p>
  <%= f.submit t('favourites.remove'), class: 'btn btn-large' %>
</p>
<% end %>
<% else %>
<% @favourite = Favourite.new(property_id: @property.id) %>
<%= form_for @favourite do |f| %>
<%= f.hidden_field :property_id %>
<p>
  <button type="submit" class="btn btn-primary btn-large"><i class='icon-heart icon-white'></i>
  <%= t('favourites.add') %></button>
</p>
<% end %>
<% end %>

<% unless @property.image.nil? %>
<p class="thumbnails" id="property-thumbnails">
<% @property.images.each do |i| %>
<a href="#pic_<%= i.id %>"><%= image_tag(i.sized_url(135, :height), alt: "Photo of #{@property.name}") %></a>
<% end %>
</p>
<% @property.images.each do |i| %>
<div id="pic_<%= i.id %>"><img src="<%= i.url %>" alt="Larger photo of <%= @property.name %>"></div>
<% end %>
<%= clear %>
<% end %>

<% unless @property.hotel? -%>
<h2><%= I18n.t('features') %></h2>

<div id="features">
  <div class="column">
    <%= I18n.t('bedrooms') %>: <%= @property.number_of_bedrooms %>
  </div>
  <div class="column">
    <%= I18n.t('bathrooms') %>: <%= @property.number_of_bathrooms %>
  </div>
  <div class="column">
    <%= I18n.t('sleeping_capacity') %>: <%= @property.sleeping_capacity %>
  </div>
  <div class="column">
<% if @property.for_rent? -%>
    <%= @property.board_basis_description %>
<% else -%>
    &nbsp;
<% end -%>
  </div>
  <p class="divider">&nbsp;</p>
<% if @property.for_rent? -%>
  <div class="column">
    <%= feature_tick(true, @property.tv_description) %><br>
    <%= feature_tick(@property.wifi?,
      I18n.t('properties.features.wifi')) %>
  </div>
  <div class="column">
    <%= feature_tick(@property.long_term_lets_available?,
      I18n.t('properties.features.long_term_lets_available')) %><br>
    <%= feature_tick(@property.short_stays?,
      I18n.t('properties.features.short_stays')) %>
  </div>
  <div class="column">
    <%= feature_tick(@property.smoking?,
      I18n.t('properties.features.smoking')) %><br>
    <%= feature_tick(@property.disabled?,
      I18n.t('properties.features.disabled')) %>
  </div>
  <div class="column">
    <%= feature_tick(@property.pets?,
      I18n.t('properties.features.pets')) %><br>
    <%= feature_tick(@property.children_welcome?,
      I18n.t('properties.features.children_welcome')) %>
  </div>
  <p class="divider">&nbsp;</p>
<% end -%>
  <div class="column">
    <%= feature_tick(@property.balcony?,
      I18n.t('properties.features.balcony')) %><br>
    <%= feature_tick(@property.terrace?,
      I18n.t('properties.features.terrace')) %><br>
    <%= feature_tick(@property.mountain_views?,
      I18n.t('properties.features.mountain_views')) %>
  </div>
  <div class="column">
    <%= feature_tick(@property.garden?,
      I18n.t('properties.features.garden')) %><br>
    <%= feature_tick(true, @property.parking_description) %><br>
    <%= feature_tick(@property.fully_equipped_kitchen?,
      I18n.t('properties.features.fully_equipped_kitchen')) %>
  </div>
  <div class="column">
    <%= feature_tick(@property.ski_in_ski_out?,
      I18n.t('properties.features.ski_in_ski_out')) %><br>
    <%= feature_tick(@property.cave?,
      I18n.t('properties.features.cave')) %><br>
    <%= feature_tick(@property.log_fire?,
      I18n.t('properties.features.log_fire')) %>
  </div>
  <div class="column">
    <%= feature_tick(@property.hot_tub?,
      I18n.t('properties.features.hot_tub')) %><br>
    <%= feature_tick(@property.sauna?,
      I18n.t('properties.features.sauna')) %><br>
    <%= feature_tick(@property.indoor_swimming_pool? ||
      @property.outdoor_swimming_pool?,
      I18n.t('properties.features.swimming_pool')) %>
  </div>
  <%= clear %>
</div>
<% end -%>

<% unless @property.description.nil? %>
<h2><%= I18n.t('description') %></h2>
<%= md @property.description %>
<% end %>

<div class="modal hide fade" id="location-modal">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Location</h3>
  </div>
  <div class="modal-body">
    <div id="map_canvas"></div>
  </div>
</div>

<p>
<% unless @property.latitude.empty? -%>
  <a href="#" id="location" class="btn btn-primary btn-large"><i class="icon-map-marker icon-white"></i> Location</a>
<% end -%>

  <%= link_to t('enquire'), contact_property_path(@property), class: 'btn btn-large btn-primary' %>
</p>

<%= clear %>

</div><!--#property-->
</div>
<%= render partial: 'directory_adverts/banners', object: DirectoryAdvert.small_banners_for(@property.resort) %>
